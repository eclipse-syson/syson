= 2025.12.0 (work in progress)

== Key highlights

== Breaking changes

== New features

- In diagrams, inherited _PortUsages_ are now displayed as graphical border nodes.
These graphical border nodes cannot be edited or deleted.

image::gv-inherited-port.png[Inherited port, width=25%,height=25%]

- When connecting those inherited _PortUsages_ graphical border nodes to/from another graphical border nodes, the inherited _PortUsages_ are redefined.

image::gv-inherited-port-edge-tools.png[Inherited port edge tool, width=65%,height=65%]

- Add a new filter in the explorer to hide expose elements in `ViewUsage`.

image::explorer-hide-expose-element-filter.png[Hide expose element filter, width=30%,height=30%]

- In diagrams, handle `ActionUsage` and `ActionDefinition` parameters (i.e. `ReferenceUsages` elements) as graphical border nodes.
Those parameters can be linked to other parameters using the _New Binding Connector As Usage (bind)_ and _New Flow (flow)_ graphical border node tools. 

image::sdv-action-parameters.png[Action parameters, width=65%,height=65%]

== Bug fixes

- Fix an issue where the `Imports` located in the root `Namespace` were not exported in the textual format.
- Fix an issue where the drag and drop of an `Element` with a _declared short_ name but no _declared name_ from the _Explorer_ view to a diagram was not possible.
For example, the following `Element` can now be safely drag and drop to a diagram:

```
requirement <'SN'> {
    doc /* Some doc */
    comment /* Some comment */
}
```

- Fix an issue where the undo of the deletion of a graphical node in a diagram was not restoring the graphical node correctly.
- Fix an issue where the _eAnnotations_ reference coming from the Ecore metamodel was taking into account by REST APIs serialization.
- In diagrams, fix an issue where the creation of a _Package_ inside another _Package_ created the _Package_ at the root of the diagram in addition to the inside of the target _Package_.
- Fix invalid resolution during textual import of _redefined Feature_ on `Redefinition`.
This problem appears in cases of a name conflict between a global available item and an item accessible via _inherited membership_ such as in the following model:

```
private import ISQBase::mass; // Gives global access to "mass"

#MP part p2 { // Implicit subsetting "p" using a semantic MetadataDefinition
	attribute :>> mass = 2.0; // Should redefine "p::mass" and not "ISQBase::mass"
}

private import Metaobjects::SemanticMetadata;

part p {
	attribute mass;
}

metadata def MP :> SemanticMetadata {
    :>> baseType = p meta SysML::PartUsage;
    :> annotatedElement : SysML::PartUsage;
}
```

- Fix an issue during texual import and export of rational numbers.

The following model is now properly imported:

```
package Occurrences {
   private import ScalarValues::*;
   occurrence def Occurrence1 {
      attribute f : Real = 1.0;
      attribute g = 3.14;
      attribute h = 2.5E-10;
      attribute i = .5;
      attribute j = 1E+3;
   }
   enum def MyEnum {
      enum1;
   }
}
```

Here is the textual export result:

```
package Occurrences {
   private import ScalarValues::*;
   occurrence def Occurrence1 {
      attribute f : Real = 1.0;
      attribute g = 3.14;
      attribute h = 2.5E-10;
      attribute i = 0.5;
      attribute j = 1000.0;
   }
   enum def MyEnum {
      enum1;
   }
}
```

- Fix an issue where a model with a redefining `AttributeUsage` incorrectly redefined a _short name_ during a textual export.
For example with the following model:

```
part p {
    attribute <a> anAttribute;
}

part p1 :> p {
    attribute :>> anAttribute;
}
```

The export gave :

```
part p {
	attribute <a> anAttribute;
}
part p1 :> p {
	attribute <a> :>> anAttribute;
}
```

Instead, it now exports:

```
part p {
	attribute <a> anAttribute;
}
part p1 :> p {
	attribute :>> anAttribute;
}
```

- Fix the textual export of `UnaryOperator` which are `Expression` using the operators '+', '-', 'not' or '~' with only one parameter.
For example in the following model:

```
private import ScalarValues::*;

part p1 {
    attribute a : Real = -1.0;
    attribute b : Integer = -1;
    attribute c : Integer = +1;
    attribute d : Boolean = not true;
}
```

- Fix an issue during textual export where serializing a reference to an `Element` having only _declared short name_ (but no _declared name_) failed.
The following models is now properly exported:

```
part p1 {
    attribute <a1>;
}

part p2 :> p1 {
    attribute :>> a1; // Previously " attribute :>> ;"
}
```

Note that with this change, _declared short name_ reference will be privileged over _name_ reference when it is possible.
For example, even if "a1" has a proper _declared name_ the model will be exported like this:

```
part p1 {
    attribute <a1> attr1;
}

part p2 :> p1 {
    attribute :>> a1; // And not "attribute :>> attr1;"
}
```

== Improvements

- In diagrams, when using direct edit on graphical elements, it's now possible to use _short names_ in the qualified names.
If two or more `Elements` share the same _short name_, {product} will search for the best candidate based on the scope of the element.
Furthermore, if an ambiguity exists between the _short name_ and the _declared name_ of two different `Elements`, the declared name will be preferred.

For example in:

```
package Drone {
   package <LA> Drone_LogicalArchitecture {
      part def CommonBattery;
   }
   package <PA> Drone_PhysicalArchitecture {
      part def Battery :> LA::CommonBattery;
   }
}
```

In the example above, when using the direct edit capability to subclass the _Battery_ `Part Definition`, it is now possible to type _LA::CommonBattery_ instead of _Drone_LogicalArchitecture::CommonBattery_.

- The _Explorer_ view now displays the _shortName_ as part of the label of `Elements`.

image::explorer-short-name-label.png[Short name in labels, width=65%,height=65%]

- The textual export now handles the `OperatorExpressions` (mainly used in semantic `MetadataDefinition`) such as in:

```
private import Metaobjects::SemanticMetadata;
part p;
metadata def MD :> SemanticMetadata {
   :>> baseType = p meta SysML::Systems::PartUsage;
}
metadata def MD2 :> SemanticMetadata {
   :>> baseType default = p meta SysML::Systems::PartUsage;
}
```

- The textual import now forces all the _memberFeature_ of _EndFeatureMemberships_ to have _isEnd = true_ like stated in the SysML Specification "8.3.3.3.3 EndFeatureMembership".
For example, it means that the two features used as connector ends in the following models now have _isEnd = true_.

```
package pa1 {
    part pa1;
    part pa2;

    connect pa1 to pa2; // Connector end features pa1 and pa2 now have isEnd = true
}
```

== Technical details

* For technical details on this {product} release (including breaking changes and dependency updates), please refer to https://github.com/eclipse-syson/syson/blob/main/CHANGELOG.adoc[changelog].
